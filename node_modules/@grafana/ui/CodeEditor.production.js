var e=require("./index.production.js"),t=require("react");require("@grafana/data"),require("react-dom"),require("tty"),require("util"),require("os"),require("@grafana/e2e-selectors"),require("moment"),require("crypto"),require("@grafana/data/src/field/scale"),require("jquery");var n=require("monaco-editor/esm/vs/editor/editor.api"),r=require("react-monaco-editor");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=i(t),a=i(r);function u(t,n,r){var i,o,a,u=[];try{for(var s=e.__values(n),d=s.next();!d.done;d=s.next()){var g=d.value;t&&!g.label.startsWith(t)||u.push(e.__assign(e.__assign({},g),{kind:l(g.kind),range:r,insertText:null!==(a=g.insertText)&&void 0!==a?a:g.label}))}}catch(e){i={error:e}}finally{try{d&&!d.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}return u}function l(t){switch(t){case e.CodeEditorSuggestionItemKind.Method:return n.languages.CompletionItemKind.Method;case e.CodeEditorSuggestionItemKind.Field:return n.languages.CompletionItemKind.Field;case e.CodeEditorSuggestionItemKind.Property:return n.languages.CompletionItemKind.Property;case e.CodeEditorSuggestionItemKind.Constant:return n.languages.CompletionItemKind.Constant;case e.CodeEditorSuggestionItemKind.Text:return n.languages.CompletionItemKind.Text}return n.languages.CompletionItemKind.Text}function s(e,t){if(e&&t)return n.languages.registerCompletionItemProvider(e,{triggerCharacters:["$"],provideCompletionItems:function(e,n,r){var i={startLineNumber:n.lineNumber,endLineNumber:n.lineNumber,startColumn:n.column,endColumn:n.column};if("$"===r.triggerCharacter)return i.startColumn=n.column-1,{suggestions:u("$",t(),i)};var o=function(e){for(var t=e.length-1;t>0;t--){var n=e.charAt(t);if("$"===n)return{index:t,prefix:e.substring(t)};if(" "===n||"\t"===n||'"'===n||"'"===n)return{index:t+1,prefix:e.substring(t+1)}}return{index:0,prefix:e}}(e.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column})),a=o.index,l=o.prefix;i.startColumn=a+1;var s=u(l,t(),i);return s.length?{suggestions:s}:void 0}})}var d=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.getEditorValue=function(){return""},e.onBlur=function(){var t=e.props.onBlur;t&&t(e.getEditorValue())},e.editorWillMount=function(t){var n=e.props,r=n.language,i=n.getSuggestions;i&&(e.completionCancel=s(r,i))},e.editorDidMount=function(t){var r=e.props,i=r.onSave,o=r.onEditorDidMount;e.getEditorValue=function(){return t.getValue()},i&&t.addCommand(n.KeyMod.CtrlCmd|n.KeyCode.KEY_S,(function(){i(e.getEditorValue())})),o&&o(t)},e}return e.__extends(r,t),r.prototype.componentWillUnmount=function(){this.completionCancel&&this.completionCancel.dispose()},r.prototype.componentDidUpdate=function(e){var t=this.props,n=t.getSuggestions,r=t.language;n&&r!==e.language&&(this.completionCancel&&this.completionCancel.dispose(),this.completionCancel=s(r,n))},r.prototype.render=function(){var e,t=this.props,n=t.theme,r=t.language,i=t.width,u=t.height,l=t.showMiniMap,s=t.showLineNumbers,d=t.readOnly,g=null!==(e=this.props.value)&&void 0!==e?e:"",m={wordWrap:"off",codeLens:!1,minimap:{enabled:g.length>100&&l,renderCharacters:!1},readOnly:d,lineNumbersMinChars:4,lineDecorationsWidth:0,overviewRulerBorder:!1,automaticLayout:!0};return s||(m.glyphMargin=!1,m.folding=!1,m.lineNumbers="off",m.lineDecorationsWidth=5,m.lineNumbersMinChars=0),o.default.createElement("div",{onBlur:this.onBlur},o.default.createElement(a.default,{width:i,height:u,language:r,theme:n.isDark?"vs-dark":"vs-light",value:g,options:m,editorWillMount:this.editorWillMount,editorDidMount:this.editorDidMount}))},r}(o.default.PureComponent),g=e.withTheme(d);exports.default=g;
//# sourceMappingURL=CodeEditor.production.js.map
